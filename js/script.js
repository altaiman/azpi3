'use strict';

(function (root) {

  // svg for all
  svg4everybody();

  function init() {
    $('[data-tabs-nav]').each(function (i, tab) {
      $(tab).children().first().trigger('click');
    });
  };

  // Global
  var winWidth = $(window).width();

  // Sliders
  $('[data-slider] .slider__list').owlCarousel({
    items: 1,
    loop: true,
    margin: 20,
    smartSpeed: 400,
    autoplay: true,
    autoplayTimeout: 5000,
    onChange: function onChange(e) {
      var sliderData = $(this.$element).closest('[data-slider]').data('slider');

      setTimeout(function () {
        var slider = $('[data-slider=' + sliderData + ']'),
            active = $(slider).find('.owl-item.active'),
            msg = $(active).find('[data-message]').data('message'),
            link = $(active).find('.slide__link').attr('href');

        $(slider).find('.slider__message').fadeOut(200, function () {
          $(slider).find('.slider__more').attr('href', link);
          $(this).html(msg).fadeIn(200);
        });
      }, 1);
    }
  });

  // Tabs
  $('[data-tabs-nav] > *').on('click', function () {
    var index = $(this).index(),
        data = $(this).parent().data('tabs-nav'),
        scroll = Boolean($('[data-tabs-content=' + data + ']').data('simplebar')),
        content = scroll ? $('[data-tabs-content=' + data + '] .simplebar-content > *').get(index) : $('[data-tabs-content=' + data + '] > *').get(index);

    $(this).addClass('tab_active').siblings('.tab').removeClass('tab_active');
    $('[data-tabs-content=' + data + '] .show').removeClass('show');
    $(content).addClass('show');
  });

  // Side list
  $('.c-list__item_more > .c-list__item-name, .c-list__item-more').on('click', function (e) {
    e.stopPropagation();

    $(this).parent().toggleClass('c-list__item_open');
  });

  if ($('.c-list').get(0)) {
    var active = $('.c-list').find('.c-list__item_active').get(0);
    if (active) {
      var list = $(active).closest('.c-list__more').get(0),
          more = $(active).closest('.c-list__more').siblings('.c-list__item-more').get(0);

      while (list != undefined) {
        $(more).trigger('click');
        list = $(more).closest('.c-list__more').get(0);
        more = $(list).closest('.c-list__more').siblings('.c-list__item-more').get(0);
      }
    }
  }

  // Custom select
  $('.select').niceSelect();

  $('.select').on('click', function () {
    new SimpleBar($(this).find('.list').get(0));
  });

  // Mobile menu
  $('.m-menu-btn').on('click', function () {
    $(this).toggleClass('m-menu-btn_close');
    $('.m-menu-drop').toggleClass('m-menu-drop_show');
    $('html').toggleClass('freezee');
  });

  // Filter adaptive
  $('.side__filter-btn').on('click', function () {
    $(this).parent().toggleClass('side__filter_show');
  });

  // Mask
  function maskFields(elem) {
    $(elem).find('.field').each(function () {
      var input = $(this).find('input'),
          type = $(input).attr('type');

      switch (type) {
        case 'tel':
          $(input).mask('+7 (000) 000 00 00');
          break;
      }
    });
  }

  maskFields('body');

  $('[data-featherlight]').on('click', function () {
    var id = $(this).data('featherlight');

    setTimeout(function () {
      var modal = $('.featherlight').find(id);
      maskFields(modal);
    }, 1);
  });

  $('.search input').mask('+7 (000) 000 00 00');

  // app init
  setTimeout(function () {
    init();
  }, 1);
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwic3ZnNGV2ZXJ5Ym9keSIsImluaXQiLCIkIiwiZWFjaCIsImkiLCJ0YWIiLCJjaGlsZHJlbiIsImZpcnN0IiwidHJpZ2dlciIsIndpbldpZHRoIiwid2luZG93Iiwid2lkdGgiLCJvd2xDYXJvdXNlbCIsIml0ZW1zIiwibG9vcCIsIm1hcmdpbiIsInNtYXJ0U3BlZWQiLCJhdXRvcGxheSIsImF1dG9wbGF5VGltZW91dCIsIm9uQ2hhbmdlIiwiZSIsInNsaWRlckRhdGEiLCIkZWxlbWVudCIsImNsb3Nlc3QiLCJkYXRhIiwic2V0VGltZW91dCIsInNsaWRlciIsImFjdGl2ZSIsImZpbmQiLCJtc2ciLCJsaW5rIiwiYXR0ciIsImZhZGVPdXQiLCJodG1sIiwiZmFkZUluIiwib24iLCJpbmRleCIsInBhcmVudCIsInNjcm9sbCIsIkJvb2xlYW4iLCJjb250ZW50IiwiZ2V0IiwiYWRkQ2xhc3MiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwic3RvcFByb3BhZ2F0aW9uIiwidG9nZ2xlQ2xhc3MiLCJsaXN0IiwibW9yZSIsInVuZGVmaW5lZCIsIm5pY2VTZWxlY3QiLCJTaW1wbGVCYXIiLCJtYXNrRmllbGRzIiwiZWxlbSIsImlucHV0IiwidHlwZSIsIm1hc2siLCJpZCIsIm1vZGFsIl0sIm1hcHBpbmdzIjoiOztBQUFBLENBQUMsVUFBU0EsSUFBVCxFQUFlOztBQUVkO0FBQ0FDOztBQUVBLFdBQVNDLElBQVQsR0FBZ0I7QUFDZEMsTUFBRSxpQkFBRixFQUFxQkMsSUFBckIsQ0FBMEIsVUFBU0MsQ0FBVCxFQUFZQyxHQUFaLEVBQWlCO0FBQ3pDSCxRQUFFRyxHQUFGLEVBQU9DLFFBQVAsR0FBa0JDLEtBQWxCLEdBQTBCQyxPQUExQixDQUFrQyxPQUFsQztBQUNELEtBRkQ7QUFHRDs7QUFFRDtBQUNBLE1BQUlDLFdBQVdQLEVBQUVRLE1BQUYsRUFBVUMsS0FBVixFQUFmOztBQUVBO0FBQ0FULElBQUUsNkJBQUYsRUFBaUNVLFdBQWpDLENBQTZDO0FBQzNDQyxXQUFPLENBRG9DO0FBRTNDQyxVQUFNLElBRnFDO0FBRzNDQyxZQUFRLEVBSG1DO0FBSTNDQyxnQkFBWSxHQUorQjtBQUszQ0MsY0FBVSxJQUxpQztBQU0zQ0MscUJBQWlCLElBTjBCO0FBTzNDQyxjQUFVLGtCQUFTQyxDQUFULEVBQVk7QUFDcEIsVUFBSUMsYUFBYW5CLEVBQUUsS0FBS29CLFFBQVAsRUFBaUJDLE9BQWpCLENBQXlCLGVBQXpCLEVBQTBDQyxJQUExQyxDQUErQyxRQUEvQyxDQUFqQjs7QUFFQUMsaUJBQVcsWUFBVztBQUNwQixZQUFJQyxTQUFTeEIsRUFBRSxrQkFBZ0JtQixVQUFoQixHQUEyQixHQUE3QixDQUFiO0FBQUEsWUFDSU0sU0FBU3pCLEVBQUV3QixNQUFGLEVBQVVFLElBQVYsQ0FBZSxrQkFBZixDQURiO0FBQUEsWUFFSUMsTUFBTTNCLEVBQUV5QixNQUFGLEVBQVVDLElBQVYsQ0FBZSxnQkFBZixFQUFpQ0osSUFBakMsQ0FBc0MsU0FBdEMsQ0FGVjtBQUFBLFlBR0lNLE9BQU81QixFQUFFeUIsTUFBRixFQUFVQyxJQUFWLENBQWUsY0FBZixFQUErQkcsSUFBL0IsQ0FBb0MsTUFBcEMsQ0FIWDs7QUFLQTdCLFVBQUV3QixNQUFGLEVBQVVFLElBQVYsQ0FBZSxrQkFBZixFQUFtQ0ksT0FBbkMsQ0FBMkMsR0FBM0MsRUFBZ0QsWUFBVztBQUN6RDlCLFlBQUV3QixNQUFGLEVBQVVFLElBQVYsQ0FBZSxlQUFmLEVBQWdDRyxJQUFoQyxDQUFxQyxNQUFyQyxFQUE2Q0QsSUFBN0M7QUFDQTVCLFlBQUUsSUFBRixFQUFRK0IsSUFBUixDQUFhSixHQUFiLEVBQWtCSyxNQUFsQixDQUF5QixHQUF6QjtBQUNELFNBSEQ7QUFLRCxPQVhELEVBV0UsQ0FYRjtBQVlEO0FBdEIwQyxHQUE3Qzs7QUF5QkE7QUFDQWhDLElBQUUscUJBQUYsRUFBeUJpQyxFQUF6QixDQUE0QixPQUE1QixFQUFxQyxZQUFXO0FBQzlDLFFBQUlDLFFBQVFsQyxFQUFFLElBQUYsRUFBUWtDLEtBQVIsRUFBWjtBQUFBLFFBQ0laLE9BQU90QixFQUFFLElBQUYsRUFBUW1DLE1BQVIsR0FBaUJiLElBQWpCLENBQXNCLFVBQXRCLENBRFg7QUFBQSxRQUVJYyxTQUFTQyxRQUFRckMsRUFBRSx3QkFBc0JzQixJQUF0QixHQUEyQixHQUE3QixFQUFrQ0EsSUFBbEMsQ0FBdUMsV0FBdkMsQ0FBUixDQUZiO0FBQUEsUUFHSWdCLFVBQVdGLE1BQUQsR0FBV3BDLEVBQUUsd0JBQXNCc0IsSUFBdEIsR0FBMkIsMEJBQTdCLEVBQXlEaUIsR0FBekQsQ0FBNkRMLEtBQTdELENBQVgsR0FBaUZsQyxFQUFFLHdCQUFzQnNCLElBQXRCLEdBQTJCLE9BQTdCLEVBQXNDaUIsR0FBdEMsQ0FBMENMLEtBQTFDLENBSC9GOztBQUtBbEMsTUFBRSxJQUFGLEVBQVF3QyxRQUFSLENBQWlCLFlBQWpCLEVBQStCQyxRQUEvQixDQUF3QyxNQUF4QyxFQUFnREMsV0FBaEQsQ0FBNEQsWUFBNUQ7QUFDQTFDLE1BQUUsd0JBQXNCc0IsSUFBdEIsR0FBMkIsU0FBN0IsRUFBd0NvQixXQUF4QyxDQUFvRCxNQUFwRDtBQUNBMUMsTUFBRXNDLE9BQUYsRUFBV0UsUUFBWCxDQUFvQixNQUFwQjtBQUNELEdBVEQ7O0FBV0E7QUFDQXhDLElBQUUsNkRBQUYsRUFBaUVpQyxFQUFqRSxDQUFvRSxPQUFwRSxFQUE2RSxVQUFTZixDQUFULEVBQVk7QUFDdkZBLE1BQUV5QixlQUFGOztBQUVBM0MsTUFBRSxJQUFGLEVBQVFtQyxNQUFSLEdBQWlCUyxXQUFqQixDQUE2QixtQkFBN0I7QUFDRCxHQUpEOztBQU1BLE1BQUk1QyxFQUFFLFNBQUYsRUFBYXVDLEdBQWIsQ0FBaUIsQ0FBakIsQ0FBSixFQUF5QjtBQUN2QixRQUFJZCxTQUFTekIsRUFBRSxTQUFGLEVBQWEwQixJQUFiLENBQWtCLHNCQUFsQixFQUEwQ2EsR0FBMUMsQ0FBOEMsQ0FBOUMsQ0FBYjtBQUNBLFFBQUlkLE1BQUosRUFBWTtBQUNWLFVBQUlvQixPQUFPN0MsRUFBRXlCLE1BQUYsRUFBVUosT0FBVixDQUFrQixlQUFsQixFQUFtQ2tCLEdBQW5DLENBQXVDLENBQXZDLENBQVg7QUFBQSxVQUNJTyxPQUFPOUMsRUFBRXlCLE1BQUYsRUFBVUosT0FBVixDQUFrQixlQUFsQixFQUFtQ29CLFFBQW5DLENBQTRDLG9CQUE1QyxFQUFrRUYsR0FBbEUsQ0FBc0UsQ0FBdEUsQ0FEWDs7QUFHQSxhQUFPTSxRQUFRRSxTQUFmLEVBQTBCO0FBQ3hCL0MsVUFBRThDLElBQUYsRUFBUXhDLE9BQVIsQ0FBZ0IsT0FBaEI7QUFDQXVDLGVBQU83QyxFQUFFOEMsSUFBRixFQUFRekIsT0FBUixDQUFnQixlQUFoQixFQUFpQ2tCLEdBQWpDLENBQXFDLENBQXJDLENBQVA7QUFDQU8sZUFBTzlDLEVBQUU2QyxJQUFGLEVBQVF4QixPQUFSLENBQWdCLGVBQWhCLEVBQWlDb0IsUUFBakMsQ0FBMEMsb0JBQTFDLEVBQWdFRixHQUFoRSxDQUFvRSxDQUFwRSxDQUFQO0FBQ0Q7QUFDRjtBQUNGOztBQUVEO0FBQ0F2QyxJQUFFLFNBQUYsRUFBYWdELFVBQWI7O0FBRUFoRCxJQUFFLFNBQUYsRUFBYWlDLEVBQWIsQ0FBZ0IsT0FBaEIsRUFBeUIsWUFBVztBQUNsQyxRQUFJZ0IsU0FBSixDQUFjakQsRUFBRSxJQUFGLEVBQVEwQixJQUFSLENBQWEsT0FBYixFQUFzQmEsR0FBdEIsQ0FBMEIsQ0FBMUIsQ0FBZDtBQUNELEdBRkQ7O0FBSUE7QUFDQXZDLElBQUUsYUFBRixFQUFpQmlDLEVBQWpCLENBQW9CLE9BQXBCLEVBQTZCLFlBQVc7QUFDdENqQyxNQUFFLElBQUYsRUFBUTRDLFdBQVIsQ0FBb0Isa0JBQXBCO0FBQ0E1QyxNQUFFLGNBQUYsRUFBa0I0QyxXQUFsQixDQUE4QixrQkFBOUI7QUFDQTVDLE1BQUUsTUFBRixFQUFVNEMsV0FBVixDQUFzQixTQUF0QjtBQUNELEdBSkQ7O0FBTUE7QUFDQTVDLElBQUUsbUJBQUYsRUFBdUJpQyxFQUF2QixDQUEwQixPQUExQixFQUFtQyxZQUFXO0FBQzVDakMsTUFBRSxJQUFGLEVBQVFtQyxNQUFSLEdBQWlCUyxXQUFqQixDQUE2QixtQkFBN0I7QUFDRCxHQUZEOztBQUlBO0FBQ0EsV0FBU00sVUFBVCxDQUFvQkMsSUFBcEIsRUFBMEI7QUFDeEJuRCxNQUFFbUQsSUFBRixFQUFRekIsSUFBUixDQUFhLFFBQWIsRUFBdUJ6QixJQUF2QixDQUE0QixZQUFXO0FBQ3JDLFVBQU1tRCxRQUFRcEQsRUFBRSxJQUFGLEVBQVEwQixJQUFSLENBQWEsT0FBYixDQUFkO0FBQUEsVUFDTTJCLE9BQU9yRCxFQUFFb0QsS0FBRixFQUFTdkIsSUFBVCxDQUFjLE1BQWQsQ0FEYjs7QUFHQSxjQUFRd0IsSUFBUjtBQUNFLGFBQUssS0FBTDtBQUNFckQsWUFBRW9ELEtBQUYsRUFBU0UsSUFBVCxDQUFjLG9CQUFkO0FBQ0E7QUFISjtBQUtELEtBVEQ7QUFVRDs7QUFFREosYUFBVyxNQUFYOztBQUVBbEQsSUFBRSxxQkFBRixFQUF5QmlDLEVBQXpCLENBQTRCLE9BQTVCLEVBQXFDLFlBQVc7QUFDOUMsUUFBTXNCLEtBQUt2RCxFQUFFLElBQUYsRUFBUXNCLElBQVIsQ0FBYSxjQUFiLENBQVg7O0FBRUFDLGVBQVcsWUFBVztBQUNwQixVQUFNaUMsUUFBUXhELEVBQUUsZUFBRixFQUFtQjBCLElBQW5CLENBQXdCNkIsRUFBeEIsQ0FBZDtBQUNBTCxpQkFBV00sS0FBWDtBQUNELEtBSEQsRUFHRSxDQUhGO0FBS0QsR0FSRDs7QUFVQXhELElBQUUsZUFBRixFQUFtQnNELElBQW5CLENBQXdCLG9CQUF4Qjs7QUFFQTtBQUNBL0IsYUFBVyxZQUFXO0FBQ3BCeEI7QUFDRCxHQUZELEVBRUcsQ0FGSDtBQUlELENBN0hELEVBNkhHUyxNQTdISCIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24ocm9vdCkge1xuXG4gIC8vIHN2ZyBmb3IgYWxsXG4gIHN2ZzRldmVyeWJvZHkoKTtcblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgICQoJ1tkYXRhLXRhYnMtbmF2XScpLmVhY2goZnVuY3Rpb24oaSwgdGFiKSB7XG4gICAgICAkKHRhYikuY2hpbGRyZW4oKS5maXJzdCgpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gR2xvYmFsXG4gIHZhciB3aW5XaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXG4gIC8vIFNsaWRlcnNcbiAgJCgnW2RhdGEtc2xpZGVyXSAuc2xpZGVyX19saXN0Jykub3dsQ2Fyb3VzZWwoe1xuICAgIGl0ZW1zOiAxLFxuICAgIGxvb3A6IHRydWUsXG4gICAgbWFyZ2luOiAyMCxcbiAgICBzbWFydFNwZWVkOiA0MDAsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgYXV0b3BsYXlUaW1lb3V0OiA1MDAwLFxuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgc2xpZGVyRGF0YSA9ICQodGhpcy4kZWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtc2xpZGVyXScpLmRhdGEoJ3NsaWRlcicpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2xpZGVyID0gJCgnW2RhdGEtc2xpZGVyPScrc2xpZGVyRGF0YSsnXScpLFxuICAgICAgICAgICAgYWN0aXZlID0gJChzbGlkZXIpLmZpbmQoJy5vd2wtaXRlbS5hY3RpdmUnKSxcbiAgICAgICAgICAgIG1zZyA9ICQoYWN0aXZlKS5maW5kKCdbZGF0YS1tZXNzYWdlXScpLmRhdGEoJ21lc3NhZ2UnKSxcbiAgICAgICAgICAgIGxpbmsgPSAkKGFjdGl2ZSkuZmluZCgnLnNsaWRlX19saW5rJykuYXR0cignaHJlZicpO1xuXG4gICAgICAgICQoc2xpZGVyKS5maW5kKCcuc2xpZGVyX19tZXNzYWdlJykuZmFkZU91dCgyMDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQoc2xpZGVyKS5maW5kKCcuc2xpZGVyX19tb3JlJykuYXR0cignaHJlZicsIGxpbmspO1xuICAgICAgICAgICQodGhpcykuaHRtbChtc2cpLmZhZGVJbigyMDApO1xuICAgICAgICB9KVxuXG4gICAgICB9LDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVGFic1xuICAkKCdbZGF0YS10YWJzLW5hdl0gPiAqJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpLFxuICAgICAgICBkYXRhID0gJCh0aGlzKS5wYXJlbnQoKS5kYXRhKCd0YWJzLW5hdicpLFxuICAgICAgICBzY3JvbGwgPSBCb29sZWFuKCQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10nKS5kYXRhKCdzaW1wbGViYXInKSksXG4gICAgICAgIGNvbnRlbnQgPSAoc2Nyb2xsKSA/ICQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10gLnNpbXBsZWJhci1jb250ZW50ID4gKicpLmdldChpbmRleCkgOiAkKCdbZGF0YS10YWJzLWNvbnRlbnQ9JytkYXRhKyddID4gKicpLmdldChpbmRleCk7XG5cbiAgICAkKHRoaXMpLmFkZENsYXNzKCd0YWJfYWN0aXZlJykuc2libGluZ3MoJy50YWInKS5yZW1vdmVDbGFzcygndGFiX2FjdGl2ZScpO1xuICAgICQoJ1tkYXRhLXRhYnMtY29udGVudD0nK2RhdGErJ10gLnNob3cnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICQoY29udGVudCkuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgfSk7XG5cbiAgLy8gU2lkZSBsaXN0XG4gICQoJy5jLWxpc3RfX2l0ZW1fbW9yZSA+IC5jLWxpc3RfX2l0ZW0tbmFtZSwgLmMtbGlzdF9faXRlbS1tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdjLWxpc3RfX2l0ZW1fb3BlbicpO1xuICB9KTtcblxuICBpZiAoJCgnLmMtbGlzdCcpLmdldCgwKSkge1xuICAgIHZhciBhY3RpdmUgPSAkKCcuYy1saXN0JykuZmluZCgnLmMtbGlzdF9faXRlbV9hY3RpdmUnKS5nZXQoMCk7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgdmFyIGxpc3QgPSAkKGFjdGl2ZSkuY2xvc2VzdCgnLmMtbGlzdF9fbW9yZScpLmdldCgwKSxcbiAgICAgICAgICBtb3JlID0gJChhY3RpdmUpLmNsb3Nlc3QoJy5jLWxpc3RfX21vcmUnKS5zaWJsaW5ncygnLmMtbGlzdF9faXRlbS1tb3JlJykuZ2V0KDApO1xuXG4gICAgICB3aGlsZSAobGlzdCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgJChtb3JlKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICBsaXN0ID0gJChtb3JlKS5jbG9zZXN0KCcuYy1saXN0X19tb3JlJykuZ2V0KDApO1xuICAgICAgICBtb3JlID0gJChsaXN0KS5jbG9zZXN0KCcuYy1saXN0X19tb3JlJykuc2libGluZ3MoJy5jLWxpc3RfX2l0ZW0tbW9yZScpLmdldCgwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDdXN0b20gc2VsZWN0XG4gICQoJy5zZWxlY3QnKS5uaWNlU2VsZWN0KCk7XG5cbiAgJCgnLnNlbGVjdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIG5ldyBTaW1wbGVCYXIoJCh0aGlzKS5maW5kKCcubGlzdCcpLmdldCgwKSlcbiAgfSk7XG5cbiAgLy8gTW9iaWxlIG1lbnVcbiAgJCgnLm0tbWVudS1idG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdtLW1lbnUtYnRuX2Nsb3NlJyk7XG4gICAgJCgnLm0tbWVudS1kcm9wJykudG9nZ2xlQ2xhc3MoJ20tbWVudS1kcm9wX3Nob3cnKTtcbiAgICAkKCdodG1sJykudG9nZ2xlQ2xhc3MoJ2ZyZWV6ZWUnKTtcbiAgfSk7XG5cbiAgLy8gRmlsdGVyIGFkYXB0aXZlXG4gICQoJy5zaWRlX19maWx0ZXItYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygnc2lkZV9fZmlsdGVyX3Nob3cnKTtcbiAgfSk7XG5cbiAgLy8gTWFza1xuICBmdW5jdGlvbiBtYXNrRmllbGRzKGVsZW0pIHtcbiAgICAkKGVsZW0pLmZpbmQoJy5maWVsZCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBpbnB1dCA9ICQodGhpcykuZmluZCgnaW5wdXQnKSxcbiAgICAgICAgICAgIHR5cGUgPSAkKGlucHV0KS5hdHRyKCd0eXBlJyk7XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICd0ZWwnOlxuICAgICAgICAgICQoaW5wdXQpLm1hc2soJys3ICgwMDApIDAwMCAwMCAwMCcpXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG1hc2tGaWVsZHMoJ2JvZHknKTtcblxuICAkKCdbZGF0YS1mZWF0aGVybGlnaHRdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgaWQgPSAkKHRoaXMpLmRhdGEoJ2ZlYXRoZXJsaWdodCcpO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IG1vZGFsID0gJCgnLmZlYXRoZXJsaWdodCcpLmZpbmQoaWQpO1xuICAgICAgbWFza0ZpZWxkcyhtb2RhbCk7XG4gICAgfSwxKVxuXG4gIH0pXG5cbiAgJCgnLnNlYXJjaCBpbnB1dCcpLm1hc2soJys3ICgwMDApIDAwMCAwMCAwMCcpXG5cbiAgLy8gYXBwIGluaXRcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBpbml0KCk7XG4gIH0sIDEpO1xuXG59KSh3aW5kb3cpO1xuIl19
